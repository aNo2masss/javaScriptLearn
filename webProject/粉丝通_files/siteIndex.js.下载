STK.register("kit.extra.language",function(a){window.$LANG||(window.$LANG={});return function(b){return a.core.util.language(b,$LANG)}});STK.register("module.layer",function(b){var c=function(e){var d={};if(e.style.display=="none"){e.style.visibility="hidden";e.style.display="";d.w=e.offsetWidth;d.h=e.offsetHeight;e.style.display="none";e.style.visibility="visible"}else{d.w=e.offsetWidth;d.h=e.offsetHeight}return d};var a=function(g,f){f=f||"topleft";var e=null;if(g.style.display=="none"){g.style.visibility="hidden";g.style.display="";e=b.core.dom.position(g);g.style.display="none";g.style.visibility="visible"}else{e=b.core.dom.position(g)}if(f!=="topleft"){var d=c(g);if(f==="topright"){e.l=e.l+d.w}else{if(f==="bottomleft"){e.t=e.t+d.h}else{if(f==="bottomright"){e.l=e.l+d.w;e.t=e.t+d.h}}}}return e};return function(h){var k=b.core.dom.builder(h);var g=k.list.outer[0],e=k.list.inner[0];var j=b.core.dom.uniqueID(g);var i={};var d=b.core.evt.custEvent.define(i,"show");b.core.evt.custEvent.define(d,"hide");var f=null;i.show=function(){g.style.display="";b.core.evt.custEvent.fire(d,"show");return i};i.hide=function(){g.style.display="none";b.custEvent.fire(d,"hide");return i};i.getPosition=function(l){return a(g,l)};i.getSize=function(l){if(l||!f){f=c.apply(i,[g])}return f};i.html=function(l){if(l!==undefined){e.innerHTML=l}return e.innerHTML};i.text=function(l){if(text!==undefined){e.innerHTML=b.core.str.encodeHTML(l)}return b.core.str.decodeHTML(e.innerHTML)};i.appendChild=function(l){e.appendChild(l);return i};i.getUniqueID=function(){return j};i.getOuter=function(){return g};i.getInner=function(){return e};i.getParentNode=function(){return g.parentNode};i.getDomList=function(){return k.list};i.getDomListByKey=function(l){return k.list[l]};i.getDom=function(m,l){if(!k.list[m]){return false}return k.list[m][l||0]};i.getCascadeDom=function(m,l){if(!k.list[m]){return false}return b.core.dom.cascadeNode(k.list[m][l||0])};return i}});STK.register("module.dialog",function(a){return function(n,o){if(!n){throw"module.dialog need template as first parameter"}var k,g,h,f,l,j,q,i,b,c,m,e;b=true;var d=function(){if(b!==false){g.hide()}};var p=function(){k=a.parseParam({t:null,l:null,width:null,height:null},o);g=a.module.layer(n,k);f=g.getOuter();l=g.getDom("title");i=g.getDom("title_content");j=g.getDom("inner");q=g.getDom("close");a.addEvent(q,"click",function(r){a.preventDefault(r);m();return false});a.custEvent.add(g,"show",function(){a.hotKey.add(document.documentElement,["esc"],d,{type:"keyup",disableInInput:true})});a.custEvent.add(g,"hide",function(){a.hotKey.remove(document.documentElement,["esc"],d,{type:"keyup"});b=true})};p();e=a.objSup(g,["show","hide"]);m=function(r){if(typeof c==="function"&&!r){if(c()===false){return false}}e.hide();if(a.contains(document.body,g.getOuter())){document.body.removeChild(g.getOuter())}return h};h=g;h.show=function(){if(!a.contains(document.body,g.getOuter())){document.body.appendChild(g.getOuter())}e.show();return h};h.hide=m;h.setPosition=function(r){f.style.top=r.t+"px";f.style.left=r.l+"px";return h};h.setMiddle=function(){var r=a.core.util.winSize();var s=g.getSize(true);f.style.top=a.core.util.scrollPos()["top"]+(r.height-s.h)/2+"px";f.style.left=(r.width-s.w)/2+"px";return h};h.setTitle=function(r){i.innerHTML=r;return h};h.setContent=function(r){if(typeof r==="string"){j.innerHTML=r}else{j.appendChild(r)}return h};h.clearContent=function(){while(j.children.length){a.removeNode(j.children[0])}return h};h.setAlign=function(){};h.setBeforeHideFn=function(r){c=r};h.clearBeforeHideFn=function(){c=null};h.unsupportEsc=function(){b=false};h.supportEsc=function(){b=true};return h}});STK.register("kit.dom.cssText",function(b){var a=function(f,e){var c=(f+";"+e).replace(/(\s*(;)\s*)|(\s*(:)\s*)/g,"$2$4"),d;while(c&&(d=c.match(/(^|;)([\w\-]+:)([^;]*);(.*;)?\2/i))){c=c.replace(d[1]+d[2]+d[3],"")}return c};return function(d){d=d||"";var e=[],c={push:function(g,f){e.push(g+":"+f);return c},remove:function(g){for(var f=0;f<e.length;f++){if(e[f].indexOf(g+":")==0){e.splice(f,1)}}return c},getStyleList:function(){return e.slice()},getCss:function(){return a(d,e.join(";"))}};return c}});STK.register("kit.dom.fix",function(d){var a=!(d.core.util.browser.IE6||(document.compatMode!=="CSS1Compat"&&STK.IE)),b=/^(c)|(lt)|(lb)|(rt)|(rb)$/;function c(g){return d.core.dom.getStyle(g,"display")!="none"}function e(h){h=d.core.arr.isArray(h)?h:[0,0];for(var g=0;g<2;g++){if(typeof h[g]!="number"){h[g]=0}}return h}function f(j,r,m){if(!c(j)){return}var q="fixed",t,u,g,p,k=j.offsetWidth,l=j.offsetHeight,n=d.core.util.winSize(),o=0,s=0,h=d.kit.dom.cssText(j.style.cssText);if(!a){q="absolute";var i=d.core.util.scrollPos();o=t=i.top;s=u=i.left;switch(r){case"lt":t+=m[1];u+=m[0];break;case"lb":t+=n.height-l-m[1];u+=m[0];break;case"rt":t+=m[1];u+=n.width-k-m[0];break;case"rb":t+=n.height-l-m[1];u+=n.width-k-m[0];break;case"c":default:t+=(n.height-l)/2+m[1];u+=(n.width-k)/2+m[0]}g=p=""}else{t=p=m[1];u=g=m[0];switch(r){case"lt":p=g="";break;case"lb":t=g="";break;case"rt":u=p="";break;case"rb":t=u="";break;case"c":default:t=(n.height-l)/2+m[1];u=(n.width-k)/2+m[0];p=g=""}}if(r=="c"){if(t<o){t=o}if(u<s){u=s}}h.push("position",q).push("top",t+"px").push("left",u+"px").push("right",g+"px").push("bottom",p+"px");j.style.cssText=h.getCss()}return function(h,n,i){var j,o,k=true,g;if(d.core.dom.isNode(h)&&b.test(n)){var l={getNode:function(){return h},isFixed:function(){return k},setFixed:function(p){(k=!!p)&&f(h,j,o);return this},setAlign:function(p,q){if(b.test(p)){j=p;o=e(q);k&&f(h,j,o)}return this},destroy:function(){if(!a){a&&d.core.evt.removeEvent(window,"scroll",m)}d.core.evt.removeEvent(window,"resize",m);d.core.evt.custEvent.undefine(g)}};g=d.core.evt.custEvent.define(l,"beforeFix");l.setAlign(n,i);function m(p){p=p||window.event;d.core.evt.custEvent.fire(g,"beforeFix",p.type);if(k&&(!a||j=="c")){f(h,j,o)}}if(!a){d.core.evt.addEvent(window,"scroll",m)}d.core.evt.addEvent(window,"resize",m);return l}}});STK.register("module.mask",function(e){var k,c=[],b,j=false,a="STK-Mask-Key";var g=e.core.dom.setStyle,i=e.core.dom.getStyle,h=e.core.evt.custEvent;function d(){k=e.C("div");var m='<div node-type="outer">';if(e.core.util.browser.IE6){m+='<div style="position:absolute;width:100%;height:100%;"></div>'}m+="</div>";k=e.builder(m).list.outer[0];document.body.appendChild(k);j=true;b=e.kit.dom.fix(k,"lt");var n=function(){var o=e.core.util.winSize();k.style.cssText=e.kit.dom.cssText(k.style.cssText).push("width",o.width+"px").push("height",o.height+"px").getCss()};h.add(b,"beforeFix",n);n()}function l(m){var n;if(!(n=m.getAttribute(a))){m.setAttribute(a,n=e.getUniqueKey())}return">"+m.tagName.toLowerCase()+"["+a+'="'+n+'"]'}var f={getNode:function(){return k},show:function(n,m){if(j){n=e.core.obj.parseParam({opacity:0.3,background:"#000000"},n);k.style.background=n.background;g(k,"opacity",n.opacity);k.style.display="";b.setAlign("lt");m&&m()}else{d();f.show(n,m)}return f},hide:function(){k.style.display="none";nowIndex=undefined;c=[];return f},showUnderNode:function(n,m){if(e.isNode(n)){f.show(m,function(){g(k,"zIndex",i(n,"zIndex"));var p=l(n);var o=e.core.arr.indexOf(c,p);if(o!=-1){c.splice(o,1)}c.push(p);e.core.dom.insertElement(n,k,"beforebegin")})}return f},back:function(){if(c.length<1){return f}var n,m;c.pop();if(c.length<1){f.hide()}else{if((m=c[c.length-1])&&(n=e.sizzle(m,document.body)[0])){g(k,"zIndex",i(n,"zIndex"));e.core.dom.insertElement(n,k,"beforebegin")}else{f.back()}}return f},destroy:function(){h.remove(b);k.style.display="none";lastNode=undefined;_cache={}}};return f});STK.register("kit.dom.drag",function(a){return function(d,p){var h,g,n,l,c,k,e,i;var q=function(){f();j()};var f=function(){h=a.parseParam({moveDom:d,perchStyle:"border:solid #999999 2px;",dragtype:"perch",actObj:{},pagePadding:5},p);n=h.moveDom;g={};l={};c=a.drag(d,{actObj:h.actObj});if(h.dragtype==="perch"){k=a.C("div");e=false;i=false;n=k}d.style.cursor="move"};var j=function(){a.custEvent.add(h.actObj,"dragStart",m);a.custEvent.add(h.actObj,"dragEnd",b);a.custEvent.add(h.actObj,"draging",o)};var m=function(r,u){document.body.style.cursor="move";var t=a.core.util.pageSize()["page"];l=a.core.dom.position(h.moveDom);l.pageX=u.pageX;l.pageY=u.pageY;l.height=h.moveDom.offsetHeight;l.width=h.moveDom.offsetWidth;l.pageHeight=t.height;l.pageWidth=t.width;if(h.dragtype==="perch"){var s=[];s.push(h.perchStyle);s.push("position:absolute");s.push("z-index:"+(h.moveDom.style.zIndex+10));s.push("width:"+h.moveDom.offsetWidth+"px");s.push("height:"+h.moveDom.offsetHeight+"px");s.push("left:"+l.l+"px");s.push("top:"+l.t+"px");k.style.cssText=s.join(";");i=true;setTimeout(function(){if(i){document.body.appendChild(k);e=true}},100)}if(d.setCapture!==undefined){d.setCapture()}};var b=function(r,s){document.body.style.cursor="auto";if(d.setCapture!==undefined){d.releaseCapture()}if(h.dragtype==="perch"){i=false;h.moveDom.style.top=k.style.top;h.moveDom.style.left=k.style.left;if(e){document.body.removeChild(k);e=false}}};var o=function(t,A){var z=l.t+(A.pageY-l.pageY);var s=l.l+(A.pageX-l.pageX);var u=z+l.height;var v=s+l.width;var r=l.pageHeight-h.pagePadding;var w=l.pageWidth-h.pagePadding;if(u<r&&z>0){n.style.top=z+"px"}else{if(z<0){n.style.top="0px"}if(u>=r){n.style.top=r-l.height+"px"}}if(v<w&&s>0){n.style.left=s+"px"}else{if(s<0){n.style.left="0px"}if(v>=w){n.style.left=w-l.width+"px"}}};q();g.destroy=function(){document.body.style.cursor="auto";if(typeof n.setCapture==="function"){n.releaseCapture()}if(h.dragtype==="perch"){i=false;if(e){document.body.removeChild(k);e=false}}a.custEvent.remove(h.actObj,"dragStart",m);a.custEvent.remove(h.actObj,"dragEnd",b);a.custEvent.remove(h.actObj,"draging",o);if(c.destroy){c.destroy()}h=null;n=null;l=null;c=null;k=null;e=null;i=null};g.getActObj=function(){return h.actObj};return g}});STK.register("ui.dialog",function(f){var e='<div class="op_layer" node-type="outer"><div class="bg"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="content"><div class="title" node-type="title"><span node-type="title_content"></span></div><a href="javascript:void(0);" class="op_close" title="关闭" node-type="close"></a><div class="detail clearfix" node-type="inner"></div></div></td></tr></tbody></table></div></div>';var d=[];var c=function(i){var j=f.module.dialog(e,i);f.custEvent.add(j,"show",function(){f.module.mask.showUnderNode(j.getOuter())});f.custEvent.add(j,"hide",function(){a(j);g(j);f.module.mask.hide(j.getOuter())});d.push({dia:j,used:true});document.body.appendChild(j.getOuter());f.kit.dom.drag(j.getDom("title"),{actObj:j,moveDom:j.getOuter()});return j};var g=function(j){var i=j.getInner();while(i.children.length){f.removeNode(i.children[0])}i=null;j.setTitle("");j.setMiddle()};var h=function(l){for(var k=0,j=d.length;k<j;k+=1){if(l===d[k]["dia"]){d[k]["used"]=true;return}}};var a=function(l){for(var k=0,j=d.length;k<j;k+=1){if(l===d[k]["dia"]){d[k]["used"]=false;return}}};var b=function(k){var m;for(var l=0,j=d.length;l<j;l+=1){if(!d[l]["used"]){d[l]["used"]=true;m=d[l]["dia"];return m}}m=c(k);return m};return function(i){return b(f.parseParam({},i))}});STK.register("ui.alert",function(e){var i='<div class="content_b" node-type="outer"><div class="main_info clearfix"  node-type="inner"><span class="info_icon icon_delM" node-type="icon"></span><p class="info_txt" node-type="textLarge"></p></div><p class="info_sec" node-type="textComplex"></p><p style="display:none" node-type="textSmall"></p><div class="layer_button"><a href="#" onclick="return false;" class="W_btn_c" node-type="OK"></a></div></div>';var h={success:"info_icon icon_succM",error:"info_icon icon_delM",warn:"info_icon icon_warnM","delete":"info_icon icon_delSa",question:"info_icon icon_askM"};var c=e.kit.extra.language;var a=[];var f=function(){var j=e.module.layer(c(i));a.push({alt:j,used:true});return j};var g=function(l){for(var k=0,j=a.length;k<j;k+=1){if(l===a[k]["dia"]){a[k]["used"]=true;return}}};var b=function(l){for(var k=0,j=a.length;k<j;k+=1){if(l===a[k]["dia"]){a[k]["used"]=false;return}}};var d=function(p){var o,n,l,r,j,q;n={};for(var k=0,m=a.length;k<m;k+=1){if(!a[k]["used"]){a[k]["used"]=true;l=a[k]["dia"];break}}l=l||f();r=e.ui.dialog();r.appendChild(l.getOuter());l.getDom("icon").className=p.icon;l.getDom("textLarge").innerHTML=p.textLarge;l.getDom("textComplex").innerHTML=p.textComplex;l.getDom("textSmall").innerHTML=p.textSmall;l.getDom("OK").innerHTML="<span>"+p.OKText+"</span>";r.setTitle(p.title);j=e.htmlToJson(l.getDom("textComplex"));e.addEvent(l.getDom("OK"),"click",r.hide);e.custEvent.add(r,"hide",function(){e.custEvent.remove(r,"hide",arguments.callee);e.removeEvent(l.getDom("OK"),"click",r.close);clearTimeout(q);b(l);p.OK(j)});if(p.timeout){q=setTimeout(r.hide,p.timeout)}n.alt=l;n.dia=r;return n};return function(m,j){j=j||{};var k,l;k=e.parseParam({title:c("#L{提示}"),icon:"warn",textLarge:m,textComplex:"",textSmall:"",OK:e.funcEmpty,OKText:c("#L{确定}"),timeout:0},j);k.icon=h[k.icon];l=d(k);l.dia.show().setMiddle();return l}});STK.register("kit.dom.parseDOM",function(a){return function(c){for(var b in c){if(c[b]&&(c[b].length==1)){c[b]=c[b][0]}}return c}});window.sinaSSOConfig={feedBackUrl:"http://"+window.location.hostname+"/ajaxlogin.php",service:"miniblog",domain:"weibo.com",framelogin:"1",pageCharset:"utf-8",isCheckLoginState:false,customLoginCallBack:function(){},customUpdateCookieCallBack:function(){},entry:"weibo"};STK.register("common.login.loginAction",function(d){var a=d.core.util.cookie,c=d.kit.extra.language;var b={};b.initLoginInput=function(e,f){if(e){(function(g,h){g.style.color="#999999";if(!g.binded){d.addEvent(g,"blur",function(){if(g.value===""){return false}try{if(window.sinaSSOController&&window.sinaSSOController.getServerTime){window.sinaSSOController.getServerTime(g.value)}}catch(i){}});e.binded=true}})(e,e.value)}};b.LoginAction=function(e){var j=d.trim(e.name);var h=d.trim(e.pwd);var i=e.remb?"7":"0";var g=function(){setTimeout(function(){f()},0)};var f=function(){var k=window.sinaSSOController;k.useTicket=true;k.useticket=1;k.loginExtraQuery.vsnf=1;if(/^service./.test(location.host)){k.feedBackUrl="http://"+location.host+"/sso/login.php"}else{k.feedBackUrl="http://"+location.host+"/ajaxlogin.php"}k.customLoginCallBack=function(l){if(l.result){k.customLoginCallBack=function(){};e.succ()}else{e.error(l.reason,l.errno);h.value=""}k.customLoginCallBack=function(){};k=null};k.login(j,h,i)};if(typeof window.sinaSSOController!="undefined"){g()}else{d.core.io.scriptLoader({url:"http://i.sso.sina.com.cn/js/ssologin.js",onComplete:function(){setTimeout(g,1000)}})}};return b});STK.register("common.login.login",function(J){if(typeof scope==="undefined"){scope={}}var z=J.kit.extra.language,F,Z,O,y=z("#L{邮箱/会员帐号/手机号}"),N,S,j="#666666",K="#999999",n,e,m=0,h=0,a,b,A=function(){},w=A,q={},X=A;var t=["sina.com","163.com","qq.com","126.com","vip.sina.com","sina.cn","hotmail.com","gmail.com","sohu.com"];var v;var ac;if(typeof scope!="undefined"&&typeof scope.regUrl!="undefined"){ac=scope.regUrl}else{ac=("http://"+(document.domain=="www.weibo.com"?"www.weibo.com":"weibo.com")+"/signup/signup.php?c=&type=&inviteCode=&code=&spe=&lang=zh_cn")}var f=z('<div class="WB_dialog" node-type="outer" style="z-index:99999;"><div class="WB_panel"><a title="#L{关闭}" node-type="close" class="WB_dl_close" href="#" onclick="return false;">#L{关闭}</a><div class="WB_login" node-type="inner"><div class="login_inner clearfix"><div class="login_main"><h3 class="login_tit">#L{已有新浪博客、新浪邮箱帐号，可直接登录}</h3><p class="login_input_id"><input type="text" node-type="username" tabindex="1" style="color:#ccc" value="#L{邮箱/会员帐号/手机账号}" class="WB_iptxt"></p><p class="login_input_pw"><input node-type="passwordtext" tabindex="2" style="color:#ccc" value="#L{请输入密码}" class="WB_iptxt"><input node-type="password" tabindex="3" type="password" style="color:#ccc" value="" class="WB_iptxt"></p><p class="login_input_vc" node-type="yzmDiv" style="display:none;"><input type="text" node-type="yzm" value="" class="WB_iptxt"><img src="about:blank" node-type="yzmUrl"><a class="change_vc" node-type="changePin" href="###">#L{换一换}</a></p><p class="login_input_wd" node-type="vdDiv" style="display:none;"><input type="text" class="WB_iptxt" node-type="vd" value="" maxLength=6 style="color:#ccc"/><a href="http://weibo.com/forgot/vdun" target="_blank" class="wd_note">微盾挂失</a></p><p class="login_btn clearfix"><a class="WB_btnA" href="###" onclick="return false;" tabindex="5" node-type="submitBtn" ><span>#L{登录}</span></a><label class="rmb_log"><input node-type="saveState" tabindex="4" type="checkbox" class="WB_checkbox">#L{下次自动登录}</label></p></div><div class="reg_weibo"><h3 class="login_tit">#L{还未开通？赶快免费注册一个吧}</h3><p class="reg_wbid"><a class="WB_reg_btn" href="'+ac+'" tabindex="6" node-type="registUrl" target="_blank"><span>#L{注册微博}</span></a></p></div></div></div></div></div>');var W=z('<div style="position:absolute;display:none;z-index:100002" class="WB_tips_smart WB_email" node-type="suggest" tabindex="-1"><p class="tipsmt_title">#L{请选择邮箱类型}</p><ul class="tipsmt_list" node-type="suggestContent"></ul></div>');var T='<div class="WB_tips_mini WB_t_err" style="z-index:100002;display:none;"><em class="W_error"></em><span class="tm_arr"></span></div>';var C=J.common.login.loginAction;var E,g;var s="js_appstyle_open_css_module_layer_layer_login";var ae;var o=document.getElementsByTagName("script");for(var aa=0,x=o.length;aa<x;aa++){if(o[aa].src&&/^http:\/\/js\.t\.sinajs\.cn/.test(o[aa].src)){var k=o[aa].src.split("version=");if(k.length>0){ae=k[1];break}}}if(ae==null){ae=new Date().getTime()}var l;var M={};M.showLoginLayer=function(af){b=af||{};b.loginSuccessUrl="";a=b.lang||"zh-cn";(typeof b.fail==="function")&&(w=b.fail);(typeof b.success==="function")&&(X=b.success);if(!J.E(s)){var ah=J.C("div");ah.id=s;J.core.util.hideContainer.appendChild(ah)}if(!J.E("logincss")){var i=document.createElement("link");i.id="logincss";i.rel="stylesheet";i.type="text/css";i.href="http://img.t.sinajs.cn/t4/appstyle/open/css/module/layer/layer_login.css?version="+ae;document.getElementsByTagName("head")[0].appendChild(i)}var ag=0;var ai=setInterval(function(){if(parseInt(J.getStyle(J.E(s),"height"))==42||ag>60){clearInterval(ai);ai=null;Q()}ag++},50)};var Q=function(){if(!E){Y();u();ab()}G()};var P;var I=function(){clearTimeout(P);P=setTimeout(r,500)};var r=function(){if(l){var i=J.core.util.pageSize();l.style.height=i.page.height+"px"}};var R=function(i){J.core.util.cookie.set("un",i,{expire:240,domain:/t.sina.com.cn/.test(location.host)?"t.sina.com.cn":"weibo.com"})};var H=function(){var i=window.sinaSSOController.getPinCodeUrl();O.yzmUrl.src=i;O.yzmDiv.style.display=""};var B=function(){d();var i=window.sinaSSOController.getPinCodeUrl();O.yzmUrl.src=i;O.yzmDiv.style.display=""};var ad=function(){O.yzmDiv.style.display="none";O.yzm.value=""};var D=function(){ad();O.vdDiv.style.display=""};var d=function(){O.vdDiv.style.display="none";O.vd.value=""};var c=function(){var i=function(){var af=window.sinaSSOController;af.useTicket=true;af.useticket=1;af.loginExtraQuery.vsnf=1;af.prelogin({username:O.username.value,checkpin:1},function(ag){if(ag&&(typeof ag.showpin!="undefined")){if(ag.showpin=="1"){m=1;B()}else{if(ag.showpin=="2"){h=1;D()}else{if(ag.showpin=="0"){ad();d()}}}}})};if(typeof window.sinaSSOController!="undefined"){i()}else{J.core.io.scriptLoader({url:"http://i.sso.sina.com.cn/js/ssologin.js",onComplete:function(){i()}})}};var G=function(){var i=J.core.util.cookie.get("un");if(i){i=unescape(i);J.core.dom.removeClassName(O.username,"W_input_default");O.username.value=i}else{O.username.value=y;J.core.dom.addClassName(O.username,"W_input_default")}O.password.value="";O.yzmDiv.style.display="none";O.yzm.value="";m=0;O.password.style.display="none";O.passwordtext.style.display="";O.saveState.checked=true;L()};var u=function(){O=J.kit.dom.parseDOM(E);var ah=J.C("div");ah.innerHTML=W;var ag=ah.childNodes[0];document.body.appendChild(ag);O.suggest=ag;O.suggestContent=ag.getElementsByTagName("UL")[0];var i=J.C("div");i.innerHTML=T;var af=i.childNodes[0];document.body.appendChild(af);O.error=af;O.errorContent=J.sizzle("em.W_error",af)[0];O.errorClose=O.error.getElementsByTagName("A")[0];O.registUrl.href=ac.replace(/lang=(.+?)$/,function(){if(a=="zh-tw"){return"lang=zh-tw"}else{return"lang=zh"}})};var p={userNameFocus:function(ah){ah=J.core.evt.getEvent();var ag=ah.target||ah.srcElement;ag.style.color=j;if(ag.value==z(y)){ag.value="";n=true}else{n=false;setTimeout(function(){var aj=p.checkSelectAll();if(aj){p.suggestKeyUpImpl()}},20)}var ai=J.core.dom.position(O.username);var i=J.core.dom.getSize(O.username);var af=O.suggest.style;af.left=(ai.l)+"px";af.top=(ai.t+i.height)+"px"},checkSelectAll:function(){var ah=O.username;var ai,i;if(typeof ah.selectionStart!=="undefined"){ai=ah.selectionStart;i=ah.selectionEnd-ah.selectionStart}else{if(ah.createTextRange){var ag=document.selection.createRange();var af=ah.createTextRange();af.setEndPoint("EndToStart",ag);ai=af.text.length;i=ag.text.length;ag=null;af=null}}return ah.value!==""&&ai===0&&i===ah.value.length},userNameBlur:function(ag){var i=true;ag=J.core.evt.getEvent();var af=ag.target||ag.srcElement;af.style.color=K;if(J.core.str.trim(af.value)==""){af.value=y;i=false}e=false;n=false;O.suggest.style.display="none";p.closeErrorLayer();if(!i){return}c()},passwordKeyup:function(af){p.closeErrorLayer();af=J.core.evt.getEvent(af);var i=af.keyCode||af.which;if(i===13){J.core.evt.fireEvent(O.submitBtn,"click")}},yzmFocus:function(af){af=J.core.evt.getEvent();var i=af.target||af.srcElement;i.style.color=j},yzmBlur:function(af){af=J.core.evt.getEvent();var i=af.target||af.srcElement;i.style.color=K},passwordTextFocus:function(af){af=J.core.evt.getEvent();var i=af.target||af.srcElement;i.style.display="none";O.password.style.display="";try{O.password.focus()}catch(af){}},passwordBlur:function(af){af=af||J.core.evt.getEvent(af);var i=af.target||af.srcElement;if(i.value==""){i.style.display="none";O.passwordtext.style.display=""}p.closeErrorLayer()},suggestKeyUp:function(ah){ah=ah||J.core.evt.getEvent(ah);var af=ah.keyCode||ah.which;var i=O.username.value;var ag=J.core.str.trim(i);if(!ag&&n&&(ag==i)){return}switch(af){case 38:if(e){n=false;p.suggestSelect(-1)}break;case 40:if(e){n=false;p.suggestSelect(1)}break;case 13:if(e){n=false;p.selectEnter();(ah.preventDefault&&ah.preventDefault())||(ah.returnValue=false)}break;case 9:break;case 27:O.suggest.style.display="none";n=false;break;default:n=false;clearTimeout(N);N=setTimeout(p.suggestKeyUpImpl,50)}},selectEnter:function(){var i=O.suggestContent.getElementsByTagName("LI");var af=J.trim(i[S].getElementsByTagName("A")[0].innerHTML);O.username.value=af;O.suggest.style.display="none";e=false;O.passwordtext.style.display="none";O.password.style.display="";try{O.password.focus()}catch(ag){}},suggestSelect:function(ag){var af=S;if(ag>0){S++}else{S--}var i=O.suggestContent.getElementsByTagName("LI");var ah=i.length-1;if(S<=0){S=ah}else{if(S>ah){S=0}}J.core.dom.removeClassName(i[af],"tipsmt_cur");J.core.dom.addClassName(i[S],"tipsmt_cur")},suggestKeyUpImpl:function(al){S=0;var ak=J.core.str.trim(O.username.value);var ag=[];var ai=ak.indexOf("@");ag.push('<li class="tipsmt_cur" action-type="email_item"><a href="javascript:void(0)">'+(ak?ak:"\u3000")+"</a></li>");if(ai>-1){var aj=ak.substr(ai+1);ak=ak.replace(/@.*$/,"")+"@";for(var ah=0,af=t.length;ah<af;ah++){if(!aj||t[ah].indexOf(aj)==0){ag.push('<li action-type="email_item"><a href="javascript:void(0)">'+ak+t[ah]+"</a></li>")}}}else{for(var ah=0,af=t.length;ah<af;ah++){ag.push('<li action-type="email_item"><a href="javascript:void(0)">'+ak+"@"+t[ah]+"</a></li>")}}O.suggestContent.innerHTML=ag.join("");O.suggest.style.display="";e=true},checkSubmit:function(ah){O.error.style.display="none";ah=J.core.evt.getEvent();var ai=J.core.str.trim(O.username.value);if(!ai||(ai==z(y))){J.core.evt.stopEvent(ah);try{O.username.focus()}catch(ah){}p.showLayerError(z("#L{请输入用户名}"),O.username)}else{var ag=O.password.value;if(!ag){J.core.evt.stopEvent(ah);O.passwordtext.style.display="none";O.password.style.display="";try{O.password.focus()}catch(ah){}p.showLayerError(z("#L{请输入密码}"),O.password);return false}else{if(m){var i=J.core.str.trim(O.yzm.value);if(!i){O.yzm.focus();p.showLayerError(z("#L{请输入验证码}"),O.yzm);J.core.evt.stopEvent(ah);return false}}else{if(h){var af=J.core.str.trim(O.vd.value);if(!af){O.vd.focus();p.showLayerError(z("#L{请输入微盾动态码}"),O.vd);J.core.evt.stopEvent(ah);return false}}}}return true}},showLayerError:function(ag,af){O.errorContent.innerHTML=ag;var i=J.core.dom.getSize(O.error);var ah=J.core.dom.position(af);O.error.style.left=ah.l+"px";O.error.style.top=(ah.t-i.height-10)+"px";O.error.style.display=""},closeErrorLayer:function(){O.error.style.display="none"},submitBtnClick:function(af){if(window.sinaSSOController){if(m){window.sinaSSOController.loginExtraQuery.door=J.core.str.trim(O.yzm.value)}else{if(h){window.sinaSSOController.loginExtraQuery.vsnval=J.core.str.trim(O.vd.value)}else{delete window.sinaSSOController.loginExtraQuery.door;delete window.sinaSSOController.loginExtraQuery.vsnval}}}var i=p.checkSubmit();if(i){C.LoginAction({name:O.username.value,pwd:O.password.value,remb:O.saveState.checked,error:function(ah,ag){if(ag==4049){m=1;B();O.yzm.focus();return}else{if(ag==2070){m=1;O.yzmUrl.src=window.sinaSSOController.getPinCodeUrl();p.showLayerError(ah,O.yzm)}else{if(ag==5024){h=1;D();O.yzm.focus();return}else{if(ag==5025){h=1;p.showLayerError(ah,O.vd)}else{m=0;p.showLayerError(ah,O.username)}}}}w(arguments);return},succ:function(){p.closeDialog();X(arguments);R(O.username.value)}})}},closeDialog:function(){if(!O){return}O.error.style.display="none";O.suggest.style.display="none";V()},emailItemClick:function(i){var af=i.el.childNodes[0].innerHTML;O.username.value=af}};var V=function(){g.hide()};var L=function(){g.show();g.setMiddle()};var ab=function(){v=J.core.evt.delegatedEvent(O.suggest);J.addEvent(O.username,"focus",p.userNameFocus);J.addEvent(O.username,"blur",p.userNameBlur);J.addEvent(O.yzm,"focus",p.yzmFocus);J.addEvent(O.yzm,"blur",p.yzmBlur);J.addEvent(O.vd,"focus",p.yzmFocus);J.addEvent(O.vd,"blur",p.yzmBlur);J.addEvent(O.username,"keyup",p.closeErrorLayer);J.addEvent(O.password,"keyup",p.passwordKeyup);J.addEvent(O.yzm,"keyup",p.passwordKeyup);J.addEvent(O.changePin,"click",H);J.addEvent(O.passwordtext,"focus",p.passwordTextFocus);J.addEvent(O.password,"blur",p.passwordBlur);J.addEvent(O.username,"keydown",p.suggestKeyUp);J.addEvent(O.submitBtn,"click",p.submitBtnClick);v.add("email_item","mousedown",p.emailItemClick);C.initLoginInput(O.username)};var Y=function(){var i=J.module.dialog(f,{});g=i;J.custEvent.add(i,"show",function(){J.module.mask.showUnderNode(i.getOuter())});J.custEvent.add(i,"hide",function(){J.module.mask.hide(i.getOuter())});document.body.appendChild(i.getOuter());i.setMiddle();E=i.getDomList()};var U=function(){J.removeEvent(O.changePin,"click",H);J.removeEvent(O.username,"focus",p.userNameFocus);J.removeEvent(O.username,"blur",p.userNameBlur);J.removeEvent(O.passwordtext,"focus",p.passwordTextFocus);J.removeEvent(O.password,"blur",p.passwordBlur);J.removeEvent(O.username,"keydown",p.suggestKeyUp);J.removeEvent(O.yzm,"focus",p.yzmFocus);J.removeEvent(O.yzm,"blur",p.yzmBlur);J.removeEvent(O.vd,"focus",p.yzmFocus);J.removeEvent(O.vd,"blur",p.yzmBlur);J.removeEvent(O.username,"keyup",p.closeErrorLayer);J.removeEvent(O.password,"keyup",p.closeErrorLayer);J.removeEvent(O.yzm,"keyup",p.passwordKeyup);J.removeEvent(O.submitBtn,"click",p.submitBtnClick);J.removeEvent(O.close,"click",p.closeDialog)};M.destroy=U;M.close=p.closeDialog;return M});STK.register("common.login.getLoginStatus",function(d){function a(){if(window.scope){var g=window.scope.current_user_weibo||window.scope.current_user_sina;if(g){return{uid:g,isLogin:!!g}}}if(window.$CONFIG){var g=window.$CONFIG.current_user_weibo||window.$CONFIG.current_user_sina||window.$CONFIG.uid;if(g){return{uid:g,isLogin:!!g}}}var f=document.cookie+";";var i=["SUP","=([^;]*)?;"].join("");var e=["(\\?|&)","uid","=([^&]*)(&|$)"].join("");var h=f.match(new RegExp(i,"i"));h=(h)?h[1]||"":"";h=unescape(h);var g=h.match(new RegExp(e));g=(g)?g[2]||"":"";return{uid:g,isLogin:!!g}}function c(){return a().isLogin}function b(){return a().isLogin}return{uid:c,isLogin:b}});STK.register("comp.web.topRev",function(b){var a;return function(w){var i=b.addEvent,M=b.core.evt.stopEvent,A=b.core.evt.preventDefault,n,f,L;var x=400,E="easeoutcubic",k={};var K,t={},I,G,v=[],P=false,q,y,z,h,d;var D=function(){for(var R=0;R<v.length;R++){v[R].style.display="none";v.pop(v[R])}};var O=function(){var S=b.common.login.getLoginStatus.isLogin();var R="http://open.weibo.com/apps";if(!S){b.common.login.login.showLoginLayer({success:function(){location.href=R}})}else{location.href=R}};var H=function(){b.common.login.login.showLoginLayer({success:function(){location.reload()}})};var p=function(W){var Y=W.el;var R=W.data.index;if(k[R]&&k[R].optionMoveMutex){return}if(!k[R]){k[R]={}}k[R].optionMoveMutex=true;if(R==d){if(q){clearTimeout(q)}}var V=Y.parentNode;var X=b.sizzle(".nav_more_layer",V)[0];t[R]=X;d=R;h=d;for(var U=0;U<v.length;U++){if(v[U]==X){k[R].optionMoveMutex=false;return}}X.style.visibility="hidden";X.style.display="block";X.style.overflow="hidden";var T;if(k[R].size){T=k[R].size}else{T=b.core.dom.getSize(X);k[R].size=T}X.style.height="0px";X.style.visibility="visible";var S=b.core.ani.tween(X,{end:function(){k[R].optionMoveMutex=false;v.push(X)},duration:x,animationType:E});k[R].tween=S;S.play({height:T.height})};var j=function(S){var R=S.data.index;var T=t[R];q=setTimeout(function(){T.style.display="none";if(k[R].tween){k[R].tween.stop()}T.style.height=k[R].size.height+"px";k[R].optionMoveMutex=false;v.pop(T)},50)};var B=function(S){var R=S.data.index;if(R==d){if(q){clearTimeout(q)}}};var Q=function(S){var R=S.data.index;var T=t[R];q=setTimeout(function(){T.style.display="none";if(k[R].tween){k[R].tween.stop()}T.style.height=k[R].size.height+"px";k[R].optionMoveMutex=false;v.pop(T)},50)};var g=function(R){if(P){return}P=true;G.style.visibility="hidden";G.style.display="block";G.style.overflow="hidden";var T=b.core.dom.getSize(G);G.style.height="0px";G.style.visibility="visible";var S=b.core.ani.tween(G,{end:function(){P=false;v.push(G)},duration:x,animationType:E});S.play({height:T.height})};var C={};var u={};var c={};var J=function(){e();o();r();m();N();l();s()};var e=function(){if(!w){throw"node 没有定义"}};var o=function(){var R=b.kit.dom.parseDOM(b.builder(w).list);I=R.userinfo_btn;G=R.userinfo_menu;y=R.login_btn;z=R.manage_center};var r=function(){};var m=function(){};var N=function(){a=b.core.evt.delegatedEvent(w);a.add("selection_btn","mouseover",p);a.add("selection_btn","mouseout",j);a.add("selection_menu","mouseover",B);a.add("selection_menu","mouseout",Q);i(document,"click",D);i(I,"click",g);if(y){i(y,"click",H)}i(z,"click",O)};var l=function(){};var s=function(){};var F=function(){};J();C.destroy=function(){};return C}});STK.pageletM.register("pl.web.topRev",function(c){var b=c.E("pl_web_top")||document.body;if(b){var a=c.comp.web.topRev(b);return a}});STK.register("common.web.createApp",function(b){var a=b.core.evt.addEvent;return function(f,n){var d;var e="http://open.weibo.com/apps";var l,q;var i=b.parseParam({createAppBtnCallback:null,manageBtnCallback:function(){location.href=e}},n);var m=function(r){var s=b.common.login.getLoginStatus.isLogin();if(!s){b.common.login.login.showLoginLayer({success:function(){r&&r()}})}return s};var p=function(){if(m(i.createAppBtnCallback)){i.createAppBtnCallback&&i.createAppBtnCallback()}};var k=function(){if(m(i.manageBtnCallback)){i.manageBtnCallback&&i.manageBtnCallback()}};var j=function(){if(!f){throw"node is not defined"}};var c=function(){d=b.kit.dom.parseDOM(b.builder(f).list);l=d.createBtn;q=d.manageBtn};var h=function(){a(l,"click",p);a(q,"click",k)};var g=function(){};var o=function(){j();c();h();g()};o()}});STK.register("template.web.createApp",function(e){var d={};var c='<#et temp data><div node-type="outer"><div class="detail clearfix" node-type="inner"><p class="layer_top_tips"><#if (data.page==0)><#if (data.personalAuthority)><span class="icon_warnb"></span>当前创建的是微连接应用，如需使用“粉服接口”或“轻应用框架”请到<a href="http://open.weibo.com/service">微服务</a>页面选择需要的产品功能进行接入。<#else><span class="icon_warnb"></span>你当前创建的是微服务应用；网站接入属微连接应用，若需接入网站，请到<a href="http://open.weibo.com/development">微连接</a>页面进行接入。</#if><#elseif (data.page == 1)><span class="icon_warnb"></span>当前创建的是微连接应用，如需使用“粉服接口”或“轻应用框架”请到<a href="http://open.weibo.com/service">微服务</a>页面选择需要的产品功能进行接入。</#if></p><div class="content_d content_width_1 clearfix"><ul class="app_list"><#if (data.page==0 )><li><div class="category_note">&nbsp;</div><cite class="app_pic_disabled" href="#0"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_connect_disabled.png?id=timecode"></div><span class="pic_txt">网站接入</span></cite><span class="app_info">部署微博组件，账号互联互通</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://www.yinyuetai.com/">音悦台</a><a href="http://www.mafengwo.cn/">蚂蜂窝</a></p></div></li><#else><li><div class="category_note">&nbsp;</div><a class="app_pic" href="http://open.weibo.com/webmaster/add"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_connect.png?id=timecode"></div><span class="pic_txt">网站接入</span></a><span class="app_info">部署微博组件，账号互联互通</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://www.yinyuetai.com/">音悦台</a><a href="http://www.mafengwo.cn/">蚂蜂窝</a></p></div></li></#if><li class="set_vline"></li><#if (data.page==0 && data.personalAuthority)><li><div class="category_note"></div><cite class="app_pic_disabled" href="#0"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_mb_disabled.png?id=timecode"></div><span class="pic_txt">移动应用</span></cite><span class="app_info">移动客户端应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href=" http://papa.me/">啪啪</a><a href="http://www.meipai.com/">美拍</a></p></div></li><#else><li><div class="category_note"></div><#if (data.page == 0)><a class="app_pic" href="http://open.weibo.com/apps/new?sort=mobile&is_service=1"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_mb.png?id=timecode"></div><span class="pic_txt">移动应用</span></a><#else><a class="app_pic" href="http://open.weibo.com/apps/new?sort=mobile"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_mb.png?id=timecode"></div><span class="pic_txt">移动应用</span></a></#if><span class="app_info">移动客户端应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href=" http://papa.me/">啪啪</a><a href="http://www.meipai.com/">美拍</a></p></div></li></#if><#if (data.page==0 && data.personalAuthority)><li><div class="category_note"></div><cite class="app_pic_disabled" href="#0"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_website_disabled.png?id=timecode"></div><span class="pic_txt">网页应用</span></cite><span class="app_info">搭建基于微博的站外网页应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://app.weibo.com/detail/6Fwkzh?preview=1&encrypt=5fbefd317051442141c8464c1fd4538a ">省电大师</a><a href="http://app.weibo.com/detail/2rBW0V?preview=1&encrypt=7b86bb5ca71cc73715856e2827862889">KFC</a></p></div></li><#else><li><div class="category_note"></div><#if (data.page==0)><a class="app_pic" href="http://open.weibo.com/apps/new?sort=web&is_service=1"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_website.png?id=timecode"></div><span class="pic_txt">网页应用</span></a><#else><a class="app_pic" href="http://open.weibo.com/apps/new?sort=web"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_website.png?id=timecode"></div><span class="pic_txt">网页应用</span></a></#if><span class="app_info">搭建基于微博的站外网页应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://app.weibo.com/detail/6Fwkzh?preview=1&encrypt=5fbefd317051442141c8464c1fd4538a ">省电大师</a><a href="http://app.weibo.com/detail/2rBW0V?preview=1&encrypt=7b86bb5ca71cc73715856e2827862889">KFC</a></p></div></li></#if><#if (data.page==0 && data.personalAuthority)><li class="last"><div class="category_note"></div><cite class="app_pic_disabled" href="#0"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_other_disabled.png?id=timecode"></div><span class="pic_txt">其他</span></cite><span class="app_info">浏览器插件、车载系统、智能设备等应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://ie.sogou.com/app/app_1590.html">搜狗小飞机</a></p></div></li><#else><li class="last"><div class="category_note"></div><#if (data.page==0)><a class="app_pic" href="http://open.weibo.com/apps/new?is_service=1"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_other.png?id=timecode"></div><span class="pic_txt">其他</span></a><#else><a class="app_pic" href="http://open.weibo.com/apps/new"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_other.png?id=timecode"></div><span class="pic_txt">其他</span></a></#if><span class="app_info">浏览器插件、车载系统、智能设备等应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://ie.sogou.com/app/app_1590.html">搜狗小飞机</a></p></div></li></#if></ul></div></div></div></#et>';var b='<#et temp data><div node-type="outer"><div class="detail clearfix" node-type="inner"><p class="layer_top_tips"><#if (data.personalAuthority)><span class="icon_warnb"></span>请选择你需要的产品功能并创建相应的应用；置灰项仅限公司开发者申请，你目前是个人开发者，请前去<a href="http://open.weibo.com/developers/basicinfo">修改开发者类型</a>后再行申请</p><#else><span class="icon_warnb"></span>请选择你需要的产品功能并创建相应的应用</p></#if><div class="content_d content_width_1 clearfix"><ul class="app_list"><li><a class="app_pic" href="http://open.weibo.com/development/fenfu"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_follower.png?id=timecode"></div><span class="pic_txt">粉丝服务平台</span></a><span class="app_info">为粉丝提供更个性化的服务</span><div class="app_case"><span>案例</span><p class="case_list"><a target="_blank" href=" http://weibo.com/bjsubway/">北京地铁</a><a target="_blank" href="http://weibo.com/xiaomihongmi">红米</a></p></div></li><#if (data.personalAuthority)><li><cite class="app_pic_disabled" href="http://open.weibo.com/development/pro"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_light_disabled.png?id=timecode"></div><span class="pic_txt">轻应用框架</span></cite><span class="app_info">在微博用户主页中运行的应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://apps.weibo.com/5103064782/QoQfSIh?id=5340">微卖</a><a href="http://apps.weibo.com/1975415803/8rYMngB1">中国电信</a></p></div></li><#else><li><a class="app_pic" href="http://open.weibo.com/development/pro"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_light.png?id=timecode"></div><span class="pic_txt">轻应用框架</span></a><span class="app_info">在微博用户主页中运行的应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://apps.weibo.com/5103064782/QoQfSIh?id=5340">微卖</a><a href="http://apps.weibo.com/1975415803/8rYMngB1">中国电信</a></p></div></li></#if><#if (data.personalAuthority)><li><cite class="app_pic_disabled" href="http://open.weibo.com/development/businessdata"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_commercial_data_disabled.png?id=timecode"></div><span class="pic_txt">商业数据接口</span></cite><span class="app_info">便捷获取微博全局数据的通路</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://open.weibo.com/caseRev.php?num=7">星星火</a><a href="http://open.weibo.com/caseRev.php?num=2">时趣科技</a></p></div></li><#else><li><a class="app_pic" href="http://open.weibo.com/development/businessdata"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_commercial_data.png?id=timecode"></div><span class="pic_txt">商业数据接口</span></a><span class="app_info">便捷获取微博全局数据的通路</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://open.weibo.com/caseRev.php?num=7">星星火</a><a href="http://open.weibo.com/caseRev.php?num=2">时趣科技</a></p></div></li></#if><#if (data.personalAuthority)><li class="last"><cite class="app_pic_disabled" href="http://open.weibo.com/apps/new?is_service=1"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_other_disabled.png?id=timecode"></div><span class="pic_txt">其他</span></cite><span class="app_info">创建诸如浏览器插件等其它应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://weibo.com/tppcc">皮皮时光机</a></p></div></li><#else><li class="last"><a class="app_pic" href="http://open.weibo.com/apps/new?is_service=1"><div class="pic"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/open/images/layer/app_other.png?id=timecode"></div><span class="pic_txt">其他</span></a><span class="app_info">创建诸如浏览器插件等其它应用</span><div class="app_case"><span>案例</span><p class="case_list"><a href="http://weibo.com/tppcc">皮皮时光机</a></p></div></li></#if></ul></div></div></div></#et>';var a='<#et temp data><div class="detail clearfix" node-type="outer"><div class="content_b" node-type="inner"><div class="main_info clearfix"><span class="info_icon icon_warnM"></span><p class="info_txt">你现在创建的是微连接应用，如果需要创建微服务应用，请点击<a title="" href="http://open.weibo.com/service">此处</a></p></div><div class="layer_button"><a href="${data.url}" class="W_btn_c"><span>继续创建</span></a><a href="#0" onclick="return false;" class="W_btn_d" node-type="cancelBtn"><span>取消创建</span></a></div></div></div></#et>';var f='<#et temp data><div class="detail clearfix" node-type="outer"><div class="content_b" node-type="inner"><div class="main_info clearfix"><span class="info_icon icon_warnM"></span><p class="info_txt">你现在创建的是移动应用，使用微博官方SDK会有更多特殊权限，详情点击<a title="" href="http://open.weibo.com/wiki/%E7%A7%BB%E5%8A%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8E%A5%E5%85%A5" target="_blank">此处</a></p></div><div class="layer_button"><a href="${data.url}" class="W_btn_c"><span>继续创建</span></a><a href="#0" onclick="return false;" class="W_btn_d" node-type="cancelBtn"><span>取消创建</span></a></div></div></div></#et>';d.microServiceCreateTemplate=b;d.createAppTemplate=c;d.alertTemplate=a;d.mobileTemplate=f;return d});STK.register("comp.web.createApp",function(c){var a=c.template.web.createApp;var b=c.core.evt.addEvent;return function(j){var f;var i=$CONFIG.pageType;var o;var l=null,d={},h;var m=function(){d.page=i;d.personalAuthority=$CONFIG.authority};var g=function(){if(i==0){l=function(){var s=c.ui.dialog();var r=c.core.util.easyTemplate(a.microServiceCreateTemplate,d).toString();var t=c.module.layer(r);s.setTitle("选择您要创建的应用类型");s.appendChild(t.getOuter());s.show().setMiddle()}}else{if(i==1){l=function(){var s=c.ui.dialog();var r=c.core.util.easyTemplate(a.createAppTemplate,d).toString();var t=c.module.layer(r);s.setTitle("选择您要创建的应用类型");s.appendChild(t.getOuter());s.show().setMiddle()}}else{if(i==2){l=function(){if(d.personalAuthority){o=c.ui.alert('个人开发者不可创建PAGE应用，若需创建请<a href="http://open.weibo.com/developers/basicinfo">修改身份</a>')}else{location.href="http://open.weibo.com/apps/new?sort=lightapp"}}}else{if(i==5){l=function(){location.href="http://open.weibo.com/apps/new?sort=fenfu&is_service=1"}}else{if(i==6){l=function(){if(d.personalAuthority){o=c.ui.alert('个人开发者不可创建商业数据应用，若需创建请<a href="http://open.weibo.com/developers/basicinfo">修改身份</a>')}else{location.href="http://open.weibo.com/apps/new?sort=bdata"}}}else{l=function(){var v=(i==3)?"app":"mobile";var t="http://open.weibo.com/apps/new?sort="+v;if(i==0){t+="&is_service=1"}if(!d.personalAuthority||i==4){var r=c.core.util.easyTemplate(i==4?a.mobileTemplate:a.alertTemplate,{url:t}).toString();var u=c.module.layer(r);var s=c.kit.dom.parseDOM(c.builder(u.getOuter()).list);b(s.cancelBtn,"click",function(){o.hide()});o=c.ui.dialog();o.appendChild(u.getOuter());o.show().setMiddle()}else{location.href=t}}}}}}}};var p=function(){if(!j){throw"node is not defined"}};var e=function(){f=c.kit.dom.parseDOM(c.builder(j).list)};var n=function(){};var k=function(){m();g();c.common.web.createApp(j,{createAppBtnCallback:l})};var q=function(){p();e();n();k()};q()}});STK.pageletM.register("pl.web.createApp",function(b){var a=b.E("pl_web_createApp");b.comp.web.createApp(a)});STK.register("kit.dom.parentElementBy",function(a){return function(f,b,d){if(!f||!b){throw new Error("传入的参数为空")}var c=0,e;f=f.parentNode;while(f.parentNode){c++;e=d(f);if(e===false){return false}else{if(e===true){return f}else{if(e===b){return null}}}f=f.parentNode;if(c>30000){return false}}return null}});STK.register("kit.dom.lastChild",function(b){var a=b.core.dom.prev;return function(d){var c=d.lastChild;if(c&&c.nodeType!=1){c=a(c)}return c}});STK.register("comp.web.caseHover",function(a){return function(f){var d,g;var c;var l=[],i=[];var e={hover:function(q){var r=a.fixEvent(q).target;if((r.tagName.toLowerCase()=="img"&&r.className=="case_cover_img")||(r.tagName.toLowerCase()=="p"&&r.className=="app_name")){var v=a.kit.dom.parentElementBy(r,document.body,function(w){if(w.className=="app_li"&&w.tagName.toLowerCase()=="div"){return true}});var p=0;for(var n=0,o=l.length;n<o;n++){if(l[n]==v){p=n}}var u=i[p];if(u!=c){u.style.display="";c&&(c.style.display="none");c=u;var s=(v.offsetHeight+28)*p+28;var t=a.sizzle("div[class=info_box_arrow]",f);if(t.length>0){t[0].style.top=s+"px"}}}}};var k=function(){if(!f){throw"node is not defined"}};var b=function(){a.addEvent(f,"mouseover",e.hover);l=a.sizzle("div[class=app_li]",f);var o=a.sizzle("div[class=inner_content]>div",f);if(o.length>0){for(var p=0,n=o.length;p<n;p++){if(o[p].style.display!="none"){c=o[p];break}}}i=o};var j=function(){};var h=function(){};var m=function(){k();b();j();h()};m()}});STK.pageletM.register("pl.web.caseHover",function(b){var a=b.E("pl_web_case");b.comp.web.caseHover(a)});STK.pageletM.start();